<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>Foodshare</title>
        <link rel="stylesheet" href="style.css">
        <!--<link rel='icon' href='images/favicon.ico' type='image/x-icon'/ > -->
        <link rel="icon" type="image/png" href="images/favicon.png">
    </head>
    <body>
        <div class="container">
            <div class="navbar">
                <img src="images/fslogo.png" class="logo">
                <nav>
                    <ul>
                        <li><a href="index.html">Form</a></li>
                        <li><a href="">Foods</a></li>
                    </ul>
                </nav>
            </div>

            <div class="content">
                <h1>This is the 2nd page</h1>
                <h2>It'll be a database of available foods</h2>
            </div>
            <p>Name: <?php echo $_POST["name"]?></p>
            <p>Address: <?php echo $_POST["address"]?></p>
            <script>
                const resultsList = document.getElementById('results')
                new URLSearchParams(window.location.search).forEach((value, name) => {
                    resultsList.append(`${name}: ${value}`)
                    resultsList.append(document.createElement('br'))
                })
            </script>

            <!-- beginning of Map code -->
            <h1>My Google Map</h1>
            <div id="map">
            </div>

            <script>
                function initMap() {
                    // Map options
                    var options = {
                        zoom: 12,
                        center:{lat:32.8801,lng:-117.2340}
                    }
                    // New map
                    var map = new google.maps.Map(document.getElementById('map'), options);

                    /*
                    // Add test marker (University City)
                    var marker = new google.maps.Marker({
                        position:{lat:32.8577,lng:-117.2054},
                        map:map
                    })

                    // Add info window for test marker
                    // Plan to use to display food and address location
                    var infoWindow = new google.maps.InfoWindow({
                        content: '<h1>University City</h1>'
                    });

                    marker.addListener('click', function(){
                        infoWindow.open(map, marker);
                    });
                    */

                    addMarker({
                        coords:{lat:32.8577,lng:-117.2300},
                        content: '<h2>La Jolla Village</h2><p>Contact: John Doe<br>Address: 1233 Place Dr, La Jolla, CA 92037<br>Food Type: Hot Meals<br>Food Name: Burgers and Fries</p>'
                    });

                    addMarker({
                        coords:{lat:32.8753,lng:-117.2361},
                        content: '<h2>UCSD Muir</h2><p>Contact: Jane Doe<br>Address: 321 Drive Place, La Jolla, CA 92037<br>Food Type: Groceries<br>Food Name: Carrots</p>'
                    });

                    // Add marker function
                    function addMarker(props) {
                        var marker = new google.maps.Marker({
                            position:props.coords,
                            map:map
                        });

                        //Check content
                        if(props.content != null) {
                            var infoWindow = new google.maps.InfoWindow({
                                content: props.content
                            });
                            marker.addListener('click', function(){
                                infoWindow.open(map, marker);
                            });
                        }
                    }
                }
            </script>


            <script
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCFZXLNj0exYOlKq2aSYh3BPcshAeQjlNg&callback=initMap&libraries=&v=weekly"
            async
            ></script>



        </div>

    </body>
</html>
